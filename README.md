# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


## Типы данных


### Информация о товарах

```
id: string;
title: string;
price: number;
image: string;
description: string;
category: string;
```


### Информация о покупателе

```
email: string;
phone: number;
```


### Корзина товаров

```
items: HTMLElement[];
total: number;
```


### Информация о доставке товара

```
payment: string;
address: string;
```


## Архитектура приложения

Код приложения разделен на слои, согласно MVP.

Структура проекта: 

- интерфейс (вывод пользовательской информации);
- данные (лоигика приложения без интерфейса);
- Presenter (связывает данные с интерфейсом);


## Описание базовых классов


### Класс Api

Базовая функциональность: работа с серверными данными; хранит основные поля и методы;

Конструктор: 
- URL основного API;
- дополнительные параметры HTTP запроса;

Методы: 
- handleResponse - обрабатывает полученный ответ от сервера; возвращает ошибку если ответ отрицательный;
- post - принимает объект с данными, обрабатывает и отправляет их, как параметр при вызове метода;
- get - отправляет GET запрос с данными и возвращает ответ сервера;


### Класс Model

Базовая функциональность: абстрактный класс, создает модальные окна;

Конструктор: принимает данные модели и объект событий; копирует данные в модель;

Методы: 
- emmitChanges — регистрирует входящее событие в EventEmitter;


### Класс EventEmitter

Базовая функциональность: реализует функционал обработчиков событий; позволяет отправлять события и подписываться на них;

Конструктор: создает схему событий;

Методы: 
- installEvent - устанавливает обработчик события;
- deleteEvent - удаляет обработчик события;
- callEvent - вызывает событие;


### Класс Component 

Базовая функциональность: абстрактный класс; создает компоненты пользовательского интерфейса;

Конструктор: 
- mainElement - контейнер, корневой DOM-элемент;

Методы: 
- toggleClass - переключает класс;
- setText - устанавливает текстовое содержимое;
- hideElement - скрывает элемент;
- showElement - показывает элемент;
- setDisabled - изменяет состояние блокировки;
- render - возвращает DOM-элемент;
- setImage - устанавливает изображение с альтернативным текстом;


### Класс Modal

Базовая функциональность: класс отвечает за отображение модальных окон; Наследуется от Component

Конструктор: принимает селектор, в котором будет установленно модальное окно и экземпляр класса EventEmitter для возможности инициализации событий

Методы:
- openModal - открывает модальное окно;
- closeModal - закрывает модальное окно;
- createModal - создает модальное окно;


### Класс AppData 

Базовая функциональность: отвечает за попадание товара в корзину. Наследуется от класса Model;

Конструктор: наследуется от класса Modal;

Методы: 
- addBasket - добавляет товар в корзину;
- getQuantity - возвращает количество товаров в корзине;
- removeBasket - удаляет товар из корзины;
- clearBasket - очищает товары в корзине;
- clearOrder - очищает данные заказа;


### Класс Form

Базовая функциональность: занимается валидацией и отправкой. Наследуется от Component;

Конструктор: принимает селекторы полей форм, кнопки отправки форм и окна "заказ оформлен"

Методы: 
- hideValidation - открывает окно "Заказ оформлен"
- enableValidation - валидация полей форм;
- clearValidation - чистит правильно заполненную форму;


### Класс Order

Базовая функциональность: реализует изменения состояний кнопок способа оплаты; наследуется от Form;

Конструктор: принимает элементы оплаты;  

Методы: 
- toggleButton - переклюает состояние кнопок способа оплаты;


### Класс Contacts

Базовая функциональность: устанавливает адрес доставки товара пользователя; наследуется от Form;

Конструктор: принимает контактные данные;  

Методы: 
- installAdress - устанавливает адрес доставки товара;


### Класс Card 

Базовая функциональность: создание карточек товара;

Конструктор: принимает контейнер карточки товара, а так же инпут "категории товара";  

Методы: 
- cardImage - устанавливает изображение карточки;
- cardCategory - устанавливает категорию товара;
- cardTitle - устанавливает название товара;


### Класс Basket 

Базовая функциональность: отображает корзину товаров, колличество товаров в корзине. Наследуется от Component;

Конструктор: 
- принимает селектор корзины товаров;

Методы: 
- toggleButton - отображает или отключает кнопку оформления заказа в зависимости от наличия товаров в корзине;
- quantityBasket - отображает сумму товаров в корзине;


### Класс Success 

Базовая функциональность: отображает модальное окно успешного оформления заказа. Наследуется от Component;

Конструктор: 
- принимает элемент успешной оплаты и устанавливает обработчик события для кнопки закрытия;

Методы: 
- setResult - устанавливает сообщение об успешной оплате;


### Класс Page 

Базовая функциональность: управляет содержимым корзины и отображением списка товаров и корзины;

Конструктор: 
- обработчик событий корзины;

Методы: 
- catalog - показывает список товаров;
- counter - показывает список товаров в корзине;



## Взаимодействие компонентов

Код, описывающий взаимодействие представления и данных находится в файле index.ts. Он выполняет роль презентера. В index.ts создаются экземпляры событий всех классов, настраивается обработка событий.





